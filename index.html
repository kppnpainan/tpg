<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Dashboard TPG ‚Äì KPPN Painan</title>
<style>
    body{
        font-family: 'Arial', sans-serif;
        background:#f5f7fb;
        margin:0;
        padding:0;
        color:#333;
    }

    .header{
        background:#1d3557;
        padding:22px;
        text-align:center;
        color:white;
        border-bottom-left-radius:20px;
        border-bottom-right-radius:20px;
        box-shadow:0 4px 12px rgba(0,0,0,0.2);
    }

    .header h2{
        margin:0;
        font-size:22px;
        font-weight:bold;
    }

    .header h4{
        margin-top:6px;
        font-size:15px;
        opacity:0.9;
    }

    .container{
        padding:20px;
        max-width:620px;
        margin:auto;
    }

    .grid{
        display:grid;
        grid-template-columns:1fr 1fr;
        gap:16px;
    }

    .card{
        background:white;
        padding:18px;
        border-radius:14px;
        box-shadow:0 3px 12px rgba(0,0,0,0.08);
        transition:.2s;
        text-align:left;
        position:relative;
    }

    .card:hover{
        transform:scale(1.03);
        box-shadow:0 4px 16px rgba(0,0,0,0.15);
    }

    .iconBox{
        width:42px;
        height:42px;
        border-radius:10px;
        display:flex;
        align-items:center;
        justify-content:center;
        font-size:22px;
        color:white;
        margin-bottom:10px;
    }

    .blue{background:#2a6fdb;}
    .orange{background:#f39c12;}
    .green{background:#27ae60;}
    .yellow{background:#f1c40f;color:#333 !important;}

    .label{
        font-size:15px;
        opacity:0.8;
        margin-bottom:6px;
        font-weight:500;
    }

    .value{
        font-size:22px;
        font-weight:bold;
        color:#1d3557;
    }

    /* Tombol detail seperti floating button */
    .detail-btn{
        display:block;
        width:160px;
        text-align:center;
        background:#1d3557;
        color:white;
        padding:14px;
        border-radius:30px;
        font-weight:bold;
        margin:30px auto 10px;
        text-decoration:none;
        box-shadow:0 4px 14px rgba(0,0,0,0.2);
        transition:.2s;
    }
    .detail-btn:hover{
        transform:scale(1.08);
        background:#16324f;
    }
</style>
</head>
<body>

<div class="header">
    <h2>Dashboard TPG</h2>
    <h4>KPPN Painan ‚Ä¢ Januari‚ÄìNovember 2025</h4>
</div>

<div class="container">

    <div class="grid">
        <div class="card">
            <div class="iconBox blue">üí∞</div>
            <div class="label">Total TPG Disalurkan</div>
            <div class="value" id="total_tpg">...</div>
        </div>

        <div class="card">
            <div class="iconBox orange">üè•</div>
            <div class="label">Potongan JKN PNS</div>
            <div class="value" id="jkn_pns">...</div>
        </div>

        <div class="card">
            <div class="iconBox green">üè•</div>
            <div class="label">Potongan JKN P3K</div>
            <div class="value" id="jkn_p3k">...</div>
        </div>

        <div class="card">
            <div class="iconBox yellow">üí∏</div>
            <div class="label">Potongan PPh</div>
            <div class="value" id="pph">...</div>
        </div>
    </div>

    <a id="detailLink" class="detail-btn" href="#" target="_blank">Lihat Detil</a>

</div>

<script>
const API_URL = "https://script.google.com/macros/s/AKfycbxreZxVCaYLijcep6uVLveLAbX5tOK-yMAyLSPzd3OaPHSpP3SHe8jUp9bmqYIPf2Iq/exec";

async function loadData(){
    try{
        const response = await fetch(API_URL);
        const data = await response.json();

        const rp = n => n.toLocaleString("id-ID");

        document.getElementById("total_tpg").innerText = "Rp " + rp(data.totalTPG);
        document.getElementById("jkn_pns").innerText = "Rp " + rp(data.totalJknPns);
        document.getElementById("jkn_p3k").innerText = "Rp " + rp(data.totalJknP3K);
        document.getElementById("pph").innerText = "Rp " + rp(data.totalPPh);

        document.getElementById("detailLink").href = data.linkDrive;

    }catch(e){
        console.log("Gagal mengambil data:", e);
    }
}

loadData();
</script>

</body>
</html>
